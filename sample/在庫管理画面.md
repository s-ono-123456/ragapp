## シート名: 在庫管理_初期表示

外部設計書

| ドキュメント名 | 作成日／更新日 | 版 | 作成者／更新者 |
|---|---|---|---|
| 外部設計書_画面設計（在庫管理） | 2025-04-19 | 1.0.0 | あなたのお名前 |

### 1. 前処理

#### 1.1. 権限チェック

・ログインユーザーの権限をチェックする。  
・在庫管理画面へのアクセス権限を確認。

#### 1.2. リクエスト情報取得

・画面に表示する在庫情報を取得する。

| ＃ | エリア名 | 画面項目名 |
|---|---|---|
| 1 | ヘッダー | 検索条件（商品コード、商品名、在庫数） |
| 2 | 本体 | 在庫一覧テーブル（商品コード、商品名、在庫数、更新日） |

### 2. チェック処理

・処理なし。

### 3. 業務処理

#### 3.1. データ取得処理

##### 3.1.1. DBからデータを取得

| ＃ | DB名 | 画面項目名 |
|---|---|---|
| 1 | 在庫 | 商品コード |
| 2 | 在庫 | 商品名 |
| 3 | 在庫 | 在庫数 |
| 4 | 在庫 | 更新日 |

#### 3.2. データ成形処理

##### 3.2.1. データ成型

・検索条件に一致するデータを絞り込み。

##### 3.2.2. 後処理

・取得データを画面表示形式に整形し表示。

---

## シート名: 在庫管理_在庫追加ボタン

外部設計書

| ドキュメント名 | 作成日／更新日 | 版 | 作成者／更新者 |
|---|---|---|---|
| 外部設計書_画面設計（在庫管理） | 2025-04-19 | 1.0.0 | あなたのお名前 |

### 1. 前処理

#### 1.1. 権限チェック

・在庫追加の権限があるか確認。

#### 1.2. リクエスト情報取得

| ＃ | エリア名 | 画面項目名 |
|---|---|---|
| 1 | 操作エリア | 商品コード |
| 2 | 操作エリア | 追加数量 |

### 2. チェック処理

・商品コードと追加数量が未入力でないかチェック。  
・追加数量が正の整数であることをチェック。

### 3. 業務処理

#### 3.1. 在庫更新処理

##### 3.1.1. 現在の在庫数取得

・対象商品コードの在庫数を取得。

##### 3.1.2. 在庫数加算

・在庫数に追加数量を加算。

##### 3.1.3. DB更新

・加算後の在庫数をDBに更新。

---

## シート名: 在庫管理_在庫削減ボタン

外部設計書

### 1. 前処理

#### 1.1. 権限チェック

・在庫削減の権限があるか確認。

#### 1.2. リクエスト情報取得

| ＃ | エリア名 | 画面項目名 |
|---|---|---|
| 1 | 操作エリア | 商品コード |
| 2 | 操作エリア | 削減数量 |

### 2. チェック処理

・商品コードと削減数量が未入力でないかチェック。  
・削減数量が正の整数であることをチェック。  
・削減後の在庫数が0未満にならないことをチェック。

### 3. 業務処理

#### 3.1. 在庫更新処理

##### 3.1.1. 現在の在庫数取得

・対象商品コードの在庫数を取得。

##### 3.1.2. 在庫数減算

・在庫数から削減数量を減算。

##### 3.1.3. DB更新

・減算後の在庫数をDBに更新。

---

## シート名: 在庫管理_在庫調整ボタン

外部設計書

### 1. 前処理

#### 1.1. 権限チェック

・在庫調整の権限があるか確認。

#### 1.2. リクエスト情報取得

| ＃ | エリア名 | 画面項目名 |
|---|---|---|
| 1 | 操作エリア | 商品コード |
| 2 | 操作エリア | 調整後在庫数 |

### 2. チェック処理

・商品コードと在庫数が未入力でないかチェック。  
・調整後在庫数が0以上の整数であることを確認。

### 3. 業務処理

#### 3.1. 在庫調整処理

・入力された在庫数でDBを上書き更新。

---

## シート名: 在庫管理_CSV出力ボタン

外部設計書

### 1. 前処理

#### 1.1. 権限チェック

・CSV出力の権限があるか確認。

#### 1.2. リクエスト情報取得

・検索条件（商品コード／商品名など）を取得。

### 2. チェック処理

・検索条件のフォーマットをチェック（必要に応じて）。

### 3. 業務処理

#### 3.1. CSV生成処理

・条件に合致する在庫一覧データを取得しCSVに変換。  
・ユーザーにファイルダウンロード提供。

---

## シート名: 在庫管理_商品マスタ参照ボタン

外部設計書

### 1. 前処理

#### 1.1. 権限チェック

・商品マスタ参照の権限があるか確認。

#### 1.2. リクエスト情報取得

・選択された商品コードを取得。

### 2. チェック処理

・商品コードの有無をチェック。

### 3. 業務処理

#### 3.1. 商品マスタ参照処理

・商品コードをキーに商品マスタ画面を別画面で開く。

